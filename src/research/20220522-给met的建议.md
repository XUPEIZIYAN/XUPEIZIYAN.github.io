# 给ENVI-met的几点建议

有些软件用起来真是让人急得牙痒痒，但是你没有别的办法，因为只有这一个相对合格的工具，还要感谢设计人员，让自己有一个可学，可用、可想，可怨的对象……Envi-met就算一个。

我在之前写的ENVI-met使用小结中提到，Envi-met是一种三维动态微气候模型，可以综合考虑风速、风向、空气温度、湿度、湍流、辐射量等变量因子，建立典型的栅格模型，计算模拟城市环境中实体表面、植被、空气的相互作用，是近年来城市微气候研究的重要工具之一。我写论文的时候用的就是这个软件，也是为了写论文才开始接触它，后来又用它做过实际项目的分析。

Envi-met的准确性被很多论文证实过，我不想多说，要模拟微气候这样的复杂问题，的确不是一件容易的事。我在学习软件的过程中，遇到了很多困难，现在学弟学妹也有跟我当时一样的疑惑。如果大家都有同样的问题，那很可能是软件设计上存在缺陷。我想再做一个小总结，说一下自己认为ENVI-met不合理或者有缺陷的地方。不仅仅是吐槽，更是期许，这些问题，或许都会成为软件更新升级的着力点。


1. Envi-met的计算速度真的是不够快，一个200*200*100的模型，需要算一两周，一个450*450*100的模型，有时候一个多月都算不完，初始化就要两三天，虽说该软件可以精细化模拟，但对于需要多模型比较和大面积模拟的研究来说，耗时实在太多。如果需要反复测试的话，时间就更没办法控制了。虽然改进算法，加快速度可能会导致精度有所下降，但下降程度如果控制在可接受的范围内，同时大幅提高计算速度，综合来看，软件的使用效率会更高。



2. Envi-met一旦开始模拟，不能暂停，让人总是提心吊胆。之前写论文的时候模型比较大，全部算完差不多两周时间。在这个期间，电脑要不眠不休进行计算，软件不能退出，不能暂停，最好也不要打开其他软件，整台电脑只做这一件事。那段时间办公室经常停电检修，一停电，或者被别人误关，之前的就白算了，只能重头开始，耽误了不少时间，差点赶不及最后的论文提交。我想，如果软件可以增加暂停计算和保留中间计算结果的功能，就算你遇到意外暂停了，大不了开机接着算，可以避免很多麻烦，节省不少时间。



3. 国内关于Envi-met的中文教程太少了，以至于我在微信公众号这个信息孤岛上简单写了一个入门教程，都有很多人留言点赞，提问加微信。Envi-met是有国内代理商的，交了钱，他们会指导你如何做，但这个钱真不少。其实，最好的教程都在它的官网上（https://www.envi-met.com/learning-support/short-clips/），一节一节讲的挺清楚，网页也在不断的优化中，现在点进去看，比我刚开始学习时更丰富，也更系统。只是里面的视频都需要翻墙才能观看，有时候翻墙也加载不出来，而且是全英文的，很多人要么看不到，要么看不懂，要么没有耐心看完。当然，这不是网站的问题，看不懂看不完只能怪自己英语不好，至于被墙了看不到，在很大程度上影响了软件在国内的普及，越是普及不够，能找到的教程就越少，也就越不利于普及。Envi-met我也是只知皮毛，很多人在公众号底下留言问问题，我没办法解答，就建议大家到Envi-met的论坛（http://www.envi-hq.com/index.php?sid=5613e38ee7f289143abe2e27b85a6134）上去问。里面有各种各样的问题，信息量很大。论坛里最常见的问题也会按照分类汇总起来（http://www.envi-hq.com/faq.php?sid=2120678145d0fb7034320ae07d88089f）。只要耐心找，大多数情况都会找到 别人已经问过的与自己的疑惑相类似的问题。




4. Envi-met建模一般是在Space插件中，也可以将Rhino模型导入，但我没试过，感觉应该不如在Space中建的准确。这个模型有点像乐高玩具，给每个栅格填充数据的时候又有点像扫雷。有时模型中出现一片草地，几片森林，占据了不少面积，但却不能选中这个范围进行整体填充，只能一格一格填，非常费时费力。一不小心建错了，还没有撤回按钮，只能想别的办法消除，且建筑、植物和铺装的消除方法不同（建筑是把高度设为0，重新填充一遍；植物是右键消除；铺装是用另一种铺装覆盖，或者用红括号选中一个范围后，点击专门的删除按钮删除，很费时间）。这些教程里好像也没咋讲，还是自己建模时慢慢摸索的。



5. 模型在正式模拟之前，需要检查是否有错误，其中一项就是看有没有超出规定高度的建筑，例如在100米高的模型中，建筑不能超过50米。手工建模难免有疏漏，模型检查窗口只能提醒我们是否有超过限制的建筑，却不能告诉我们到底是哪些建筑超过限制，只能回到软件中去一行行查，也很费时费力。如果模型检查时可以标记出超高建筑，修改起来就会便捷很多。



6. Space建模的时候要插入一张底图，但是模型不是一次就能建好的，每回关掉软件重新打开，都需要再次插入底图。虽然不是什么大事，操作也不复杂，但总觉得别扭，如果模型可以记住底图插入的链接，打开以后自动加载，会更高效。



7. 在模拟的过程中，有很多参数要设置，我到现在都没有全部搞明白他们的含义以及如何获得。问学长学姐，大家都说按照默认，我其实心里是没底的。模拟参数的设置对于结果来说至关重要，我连有些参数是干嘛的都没搞清楚，不同的数值会对结果产生怎样的影响，多大的影响也说不清楚，就算出了结果，其实是不够严谨的。如果在参数设置时能有链接对这些参数进行说明，再建议一些获得参数的可靠途径，会让模拟过程更加清晰。


当然了，提意见嘛人人都会，但是真正解决这些问题却不是简单的事，也非一朝一夕能完成。只是希望使用者提出的修改意见可以对软件的更新换代有所帮助，让以后的使用者更加方便，也让城市热环境的研究之路越走越宽。毕竟，工欲善其事，必先利其器，在科学研究上，工具的重要性是不言而喻的。



我这个公众号也没什么核心主题，更没有所谓目标用户，想写什么就写了。有些是随笔散文，有些是设计上的总结，我以前觉得大家对这些总结没什么兴趣，可没想到公众号上所有文章，留言最多的竟然是envi-met的简易教程。



研究生阶段差不多结束了，城市设计札记也该完结了。我想重新开一个系列，就叫“设计札记”吧，把自己以后工作和学习中关于设计的思考都写下来，反正没什么坏处。